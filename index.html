<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PO Reconditioning Plan</title>
  <meta name="description" content="A gradual regimen for regaining oral intake (PO) after prolonged underuse, with checklists and notes that save on your device. Soli Deo Gloria." />
  <style>
    :root{
      --bg:#0b0f14;
      --card:#121a24;
      --card2:#0f1620;
      --text:#e8eef7;
      --muted:#b6c3d6;
      --line:#223042;
      --accent:#6aa9ff;
      --good:#3ddc97;
      --warn:#ffcc66;
      --bad:#ff6b6b;
      --shadow: 0 12px 32px rgba(0,0,0,.35);
      --radius:16px;
      --radius2:12px;
      --max: 940px;
      --tap: 52px;
      --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f4f7fb;
        --card:#ffffff;
        --card2:#f7f9fc;
        --text:#152233;
        --muted:#516173;
        --line:#d8e2f0;
        --accent:#1f6fff;
        --shadow: 0 10px 22px rgba(15,34,66,.12);
      }
    }
    html,body{height:100%;}
    body{
      margin:0;
      background:linear-gradient(180deg, var(--bg), color-mix(in srgb, var(--bg) 84%, #000 16%));
      color:var(--text);
      font-family:var(--font);
    }
    header.site{
      position:sticky; top:0; z-index:20;
      backdrop-filter: blur(10px);
      background: color-mix(in srgb, var(--bg) 70%, transparent 30%);
      border-bottom:1px solid color-mix(in srgb, var(--line) 75%, transparent 25%);
    }
    .wrap{max-width:var(--max); margin:0 auto; padding:14px 16px;}
    .top{display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
    .brand{display:flex; gap:10px; align-items:center;}
    .logo{
      width:42px;height:42px;border-radius:12px;
      background: radial-gradient(circle at 30% 30%, var(--good), #000);
      box-shadow: var(--shadow);
    }
    .nav{display:flex; gap:8px; flex-wrap:wrap;}
    .chip{
      border:1px solid var(--line);
      background: color-mix(in srgb, var(--card) 84%, transparent 16%);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
    }
    main{padding:18px 0 40px;}
    .card{
      border:1px solid var(--line);
      background: color-mix(in srgb, var(--card) 92%, transparent 8%);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom:14px;
    }
    .hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:14px;
      border-bottom:1px solid var(--line);
    }
    .badge{
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px 10px;
      font-size:12px;
      background: color-mix(in srgb, var(--card2) 88%, transparent 12%);
      cursor:pointer;
    }
    .content{padding:14px;}
    .pill{
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px 10px;
      font-size:12px;
      background: color-mix(in srgb, var(--card2) 90%, transparent 10%);
      margin:4px 6px 0 0;
      cursor:pointer;
    }
    .pill[aria-pressed="true"]{
      border-color: color-mix(in srgb, var(--accent) 70%, var(--line) 30%);
      background: color-mix(in srgb, var(--accent) 18%, var(--card2) 82%);
    }
    .check{
      display:flex; gap:10px; align-items:flex-start;
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      margin-bottom:10px;
    }
    .check input{width:22px;height:22px;}
    button{font-family:inherit;}
    textarea{
      width:100%; min-height:160px;
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:12px;
      background: color-mix(in srgb, var(--card2) 92%, transparent 8%);
      color:var(--text);
    }
  </style>
</head>

<body>
<header class="site">
  <div class="wrap top">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <strong>PO Reconditioning Plan</strong>
        <div style="font-size:12px;color:var(--muted);">Gradual steps to regain oral intake</div>
      </div>
    </div>
    <nav class="nav">
      <button class="chip" data-jump="#daily">Daily plan</button>
      <button class="chip" data-jump="#notes">My notes</button>
      <a class="chip" href="index.html">Back to PEG-J Guide</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <article class="card" id="daily">
    <div class="hd">
      <div>
        <strong>Daily plan</strong>
        <div style="font-size:12px;color:var(--muted);">Tap boxes to track today</div>
      </div>
      <button class="badge" data-jump="#daily">Checklist</button>
    </div>

    <div class="content">
      <strong>Choose your current stage:</strong><br>
      <button class="pill stage-pill" data-stage="0">Stage 0</button>
      <button class="pill stage-pill" data-stage="1">Stage 1</button>
      <button class="pill stage-pill" data-stage="2">Stage 2</button>
      <button class="pill stage-pill" data-stage="3">Stage 3</button>
      <button class="pill stage-pill" data-stage="4">Stage 4</button>

      <div style="margin-top:14px;">
        <div class="check">
          <input type="checkbox" id="d1" data-save="cb.po.d1">
          <label for="d1">Did my first mini-session</label>
        </div>
        <div class="check">
          <input type="checkbox" id="d2" data-save="cb.po.d2">
          <label for="d2">Did a second mini-session</label>
        </div>
        <div class="check">
          <input type="checkbox" id="d3" data-save="cb.po.d3">
          <label for="d3">Stayed upright after intake</label>
        </div>
      </div>

      <button id="newDayBtn">New day</button>
      <button id="resetAllBtn">Reset all</button>
    </div>
  </article>

  <article class="card" id="notes">
    <div class="hd">
      <strong>My notes</strong>
      <span class="badge">Auto-save</span>
    </div>
    <div class="content">
      <textarea id="patientNotes" placeholder="Notes auto-save on this device"></textarea>
      <br><br>
      <button id="copyBtn">Copy</button>
      <button id="clearNotesBtn">Clear</button>
    </div>
  </article>

</main>

<script>
  // smooth jump
  document.querySelectorAll('[data-jump]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const el = document.querySelector(btn.dataset.jump);
      if(el) el.scrollIntoView({behavior:'smooth'});
    });
  });

  // storage
  const store = {
    get:(k,f=null)=>{try{const v=localStorage.getItem(k);return v===null?f:JSON.parse(v);}catch{return f}},
    set:(k,v)=>{try{localStorage.setItem(k,JSON.stringify(v));}catch{}}
  };

  // stage selector
  const STAGE_KEY = 'po.stage';
  const stageBtns = document.querySelectorAll('.stage-pill');
  function setStage(n){
    store.set(STAGE_KEY,n);
    stageBtns.forEach(b=>{
      b.setAttribute('aria-pressed', Number(b.dataset.stage)===Number(n));
    });
  }
  const savedStage = store.get(STAGE_KEY,null);
  if(savedStage!==null) setStage(savedStage);
  stageBtns.forEach(b=> b.addEventListener('click',()=>setStage(b.dataset.stage)));

  // checkboxes
  document.querySelectorAll('input[type="checkbox"][data-save]').forEach(cb=>{
    const k=cb.dataset.save;
    cb.checked=!!store.get(k,false);
    cb.addEventListener('change',()=>store.set(k,cb.checked));
  });

  // notes
  const notesEl=document.getElementById('patientNotes');
  const NOTES_KEY='notes.po';
  notesEl.value=store.get(NOTES_KEY,'');
  notesEl.addEventListener('input',()=>store.set(NOTES_KEY,notesEl.value));

  document.getElementById('copyBtn').onclick=()=>navigator.clipboard.writeText(notesEl.value);
  document.getElementById('clearNotesBtn').onclick=()=>{
    if(confirm('Clear notes?')){notesEl.value='';store.set(NOTES_KEY,'');}
  };

  document.getElementById('newDayBtn').onclick=()=>{
    ['cb.po.d1','cb.po.d2','cb.po.d3'].forEach(k=>{
      const cb=document.querySelector(`input[data-save="${k}"]`);
      if(cb){cb.checked=false;store.set(k,false);}
    });
  };

  document.getElementById('resetAllBtn').onclick=()=>{
    document.querySelectorAll('input[type="checkbox"][data-save]').forEach(cb=>{
      cb.checked=false;store.set(cb.dataset.save,false);
    });
  };
</script>
</body>
</html>
